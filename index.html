<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KOSTYUK PROJECT</title>
    <meta name="description" content="–ò–ª–ª—é–∑–∏–æ–Ω–∏—Å—Ç –î–º–∏—Ç—Ä–∏–π –ö–æ—Å—Ç—é–∫. –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- –®—Ä–∏—Ñ—Ç—ã -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&display=swap" rel="stylesheet">

    <style>
        :root {
            --gold-light: #F3E5AB;
            --gold-main: #C6A664;
            --gold-dark: #8A6E36;
            --bg-black: #050505;
        }

        body {
            font-family: 'Manrope', sans-serif;
            background-color: var(--bg-black);
            color: #Eaeaea;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        h1, h2, h3, h4, .font-serif { font-family: 'Playfair Display', serif; }
        .font-cormorant { font-family: 'Cormorant Garamond', serif; }
        .font-cinzel { font-family: 'Cinzel', serif; }
        
        /* --- –§–û–ù --- */
        .bg-texture {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://images.unsplash.com/photo-1534796636912-3b95b3ab5980?auto=format&fit=crop&q=80');
            background-size: cover; background-position: center;
            opacity: 0.15; z-index: -2; pointer-events: none;
            filter: grayscale(100%) contrast(120%);
        }
        .spotlight {
            position: fixed; top: -20%; left: 50%; transform: translateX(-50%);
            width: 120vw; height: 100vh;
            background: radial-gradient(circle at 50% 20%, rgba(198, 166, 100, 0.08) 0%, rgba(0,0,0,0) 70%);
            pointer-events: none; z-index: -1;
        }

        /* --- SPA --- */
        .page-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            overflow-y: auto; overflow-x: hidden;
            background: transparent;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease;
            z-index: 10; padding-bottom: 80px; 
        }
        #home-page { z-index: 10; }
        .inner-page { transform: translateX(100%); z-index: 20; background: #080808; }
        .inner-page.active { transform: translateX(0); }

        /* --- UI --- */
        .app-card {
            position: relative;
            background: rgba(20, 20, 20, 0.6);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 16px;
            transition: all 0.2s;
            backdrop-filter: blur(12px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        .app-card:active { transform: scale(0.98); border-color: var(--gold-main); }
        .tag { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; padding: 4px 8px; border-radius: 6px; }
        .tag-gold { background: rgba(198, 166, 100, 0.15); color: var(--gold-main); border: 1px solid rgba(198, 166, 100, 0.3); }
        .tag-purple { background: rgba(180, 100, 255, 0.15); color: #d8aaff; border: 1px solid rgba(180, 100, 255, 0.3); }
        .tag-blue { background: rgba(100, 180, 255, 0.15); color: #8ecfff; border: 1px solid rgba(100, 180, 255, 0.3); }

        .sticky-header {
            position: sticky; top: 0; z-index: 30;
            background: rgba(5,5,5,0.95); backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        /* --- INPUTS --- */
        .form-input, .form-select {
            width: 100%; padding: 12px; border-radius: 12px;
            background: #15171e; border: 1.5px solid #2f3138;
            color: #fff; font-size: 15px; outline: none; transition: 0.2s; appearance: none;
        }
        .form-input:focus, .form-select:focus { border-color: var(--gold-main); }
        .input-error { border-color: #ef4444 !important; animation: shake 0.4s; }
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-5px);} 75% {transform: translateX(5px);} }

        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%;
            background: var(--gold-main); margin-top: -6px; cursor: pointer;
        }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; background: #333; border-radius: 2px; }

        /* --- GAME --- */
        .gameWrap { display: flex; justify-content: center; gap: 10px; perspective: 1000px; margin-bottom: 20px; }
        .card-game { width: 80px; height: 110px; position: relative; transform-style: preserve-3d; transition: transform 0.6s; cursor: pointer; }
        .card-game.flipped { transform: rotateY(180deg); }
        .face, .back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 8px; display: flex; align-items: center; justify-content: center; }
        .back { background: linear-gradient(135deg, #C6A664, #8A6E36); border: 2px solid white; }
        .face { background: white; transform: rotateY(180deg); font-size: 24px; color: black; font-weight: bold; }

        /* --- STORIES --- */
        .story-ring {
            padding: 3px; border-radius: 50%;
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            cursor: pointer; position: relative;
        }
        .story-ring img { border: 2px solid #000; border-radius: 50%; width: 100%; height: 100%; object-fit: cover; }

        /* --- MARQUEE --- */
        .marquee-container { overflow: hidden; white-space: nowrap; position: relative; width: 100%; }
        .marquee-content { display: inline-block; animation: marquee 20s linear infinite; }
        @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

        /* --- FAQ SCROLL --- */
        .faq-scroll { max-height: 400px; overflow-y: auto; padding-right: 8px; }
        .faq-scroll::-webkit-scrollbar { width: 4px; }
        .faq-scroll::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }

        /* --- TOAST --- */
        .toast {
            position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%) translateY(100px);
            background: #1a1a1a; border: 1px solid #333; color: #fff;
            padding: 12px 24px; border-radius: 12px; z-index: 200;
            opacity: 0; transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            display: flex; align-items: center; gap: 10px; font-size: 14px; pointer-events: none; width: max-content;
        }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
        .toast svg { color: var(--gold-main); width: 20px; height: 20px; flex-shrink: 0; }

        /* --- ANIMATION --- */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in-up { animation: fadeInUp 0.5s ease-out forwards; }
        .curtain { position: fixed; top: 0; width: 50%; height: 100%; background: #050505; z-index: 100; transition: transform 1s ease; }
        .curtain-left { left: 0; border-right: 1px solid #222; }
        .curtain-right { right: 0; border-left: 1px solid #222; }
        .curtains-open .curtain-left { transform: translateX(-100%); }
        .curtains-open .curtain-right { transform: translateX(100%); }
        .curtain-logo { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 101; transition: opacity 0.5s; pointer-events: none;}

        .no-scrollbar::-webkit-scrollbar { display: none; }
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
    </style>
</head>
<body>

    <!-- –ò–ù–¢–†–û -->
    <div id="intro-overlay">
        <div class="curtain curtain-left"></div>
        <div class="curtain curtain-right"></div>
        <div id="curtain-logo" class="curtain-logo flex flex-col items-center">
            <div class="w-16 h-16 border border-[#C6A664] rounded-full flex items-center justify-center mb-4 bg-black">
                <span class="text-3xl font-serif text-[#C6A664]">K</span>
            </div>
        </div>
    </div>

    <!-- TOAST -->
    <div id="toast" class="toast">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
        <span id="toast-msg">–°–æ–æ–±—â–µ–Ω–∏–µ</span>
    </div>

    <div class="bg-texture"></div>
    <div class="spotlight"></div>

    <!-- ================== –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù ================== -->
    <div id="home-page" class="page-container px-5 pt-8">
        <header class="text-center mb-8 animate-fade-in">
            <h1 class="text-3xl font-serif font-bold tracking-wide text-white mb-2">
                KOSTYUK <span class="text-[#C6A664]">PROJECT</span>
            </h1>
            <p class="text-xs text-gray-500 font-medium uppercase tracking-widest">
                –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
            </p>
        </header>

        <div class="flex flex-col gap-4 max-w-md mx-auto">
            <!-- –î–í–ï–†–¨ 1 -->
            <button onclick="goToPage('page-private')" class="app-card w-full text-left p-6 group">
                <div class="flex justify-between items-start mb-3">
                    <span class="tag tag-gold">–ü—Ä–µ–º–∏—É–º</span>
                    <svg class="w-5 h-5 text-gray-500 group-active:text-[#C6A664]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </div>
                <h2 class="text-2xl font-serif text-white mb-1">–ß–∞—Å—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</h2>
                <p class="text-xs text-[#888] uppercase tracking-wide font-bold mb-3">–°–≤–∞–¥—å–±—ã ‚Ä¢ –Æ–±–∏–ª–µ–∏ ‚Ä¢ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤—ã</p>
                <div class="h-px w-8 bg-[#C6A664] mb-3 opacity-50"></div>
                <p class="text-sm text-gray-400">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ü–µ–Ω—ã, –≤–∏–¥–µ–æ-–æ—Ç–∑—ã–≤—ã –∏ –±—ã—Å—Ç—Ä–∞—è –±—Ä–æ–Ω—å –¥–∞—Ç—ã.</p>
            </button>

            <!-- –î–í–ï–†–¨ 2 -->
            <button onclick="goToPage('page-concert')" class="app-card w-full text-left p-6 group">
                <div class="flex justify-between items-start mb-3">
                    <span class="tag tag-purple">–ê—Ñ–∏—à–∞</span>
                    <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </div>
                <h2 class="text-2xl font-serif text-white mb-1">–®–æ—É ¬´–°–µ–∫—Ä–µ—Ç¬ª</h2>
                <p class="text-xs text-[#888] uppercase tracking-wide font-bold mb-3">–¢–µ–∞—Ç—Ä ‚Ä¢ –°–≤–∏–¥–∞–Ω–∏–µ ‚Ä¢ –í–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è</p>
                <div class="h-px w-8 bg-[#d8aaff] mb-3 opacity-50"></div>
                <p class="text-sm text-gray-400">–í—ã–±—Ä–∞—Ç—å –ª—É—á—à–∏–µ –º–µ—Å—Ç–∞ –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç—Ä–µ–π–ª–µ—Ä.</p>
            </button>

            <!-- –î–í–ï–†–¨ 3 -->
            <button onclick="goToPage('page-school')" class="app-card w-full text-left p-6 group">
                <div class="flex justify-between items-start mb-3">
                    <span class="tag tag-blue">–î–µ—Ç–∏ 7‚Äì13 –ª–µ—Ç</span>
                    <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </div>
                <h2 class="text-2xl font-serif text-white mb-1">–®–∫–æ–ª–∞ –í–æ–ª—à–µ–±—Å—Ç–≤–∞</h2>
                <p class="text-xs text-[#888] uppercase tracking-wide font-bold mb-3">–†–∞–∑–≤–∏—Ç–∏–µ ‚Ä¢ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å</p>
                <div class="h-px w-8 bg-[#8ecfff] mb-3 opacity-50"></div>
                <p class="text-sm text-gray-400">–ü—Ä–µ–≤—Ä–∞—â–∞–µ–º —Å—Ç–µ—Å–Ω–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –∞—Ä—Ç–∏—Å—Ç–∏–∑–º. –ó–∞–ø–∏—Å—å –Ω–∞ —É—Ä–æ–∫.</p>
            </button>
        </div>

        <div class="mt-10 text-center px-4">
             <button onclick="openContact()" class="w-full py-4 rounded-xl border border-[#333] bg-[#0f0f0f] text-gray-400 text-sm font-medium flex items-center justify-center gap-2 active:bg-[#1a1a1a]">
                <span>–ù–∞–ø–∏—Å–∞—Ç—å –ª–∏—á–Ω–æ –î–º–∏—Ç—Ä–∏—é</span>
            </button>
        </div>
    </div>


    <!-- ================== –í–∫–ª–∞–¥–∫–∞ 1: –ß–ê–°–¢–ù–´–ï –°–û–ë–´–¢–ò–Ø ================== -->
    <div id="page-private" class="page-container inner-page">
        <div class="sticky-header flex items-center p-4 justify-between">
            <div class="flex items-center">
                <button onclick="goBack()" class="p-2 -ml-2 text-gray-400 active:text-white">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                </button>
                <h3 class="text-lg font-serif font-bold text-white ml-2">–ß–∞—Å—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</h3>
            </div>
        </div>

        <div class="p-5 max-w-md mx-auto space-y-8">
            
            <!-- –ò–Ω—Ç—Ä–æ -->
            <div class="text-center">
                <div class="w-24 h-24 mx-auto rounded-full border-2 border-[#C6A664] overflow-hidden mb-3">
                    <img src="images/portrait.jpg" onerror="this.src='https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&q=80'" class="w-full h-full object-cover">
                </div>
                <h1 class="text-3xl font-serif text-white mb-1">–î–º–∏—Ç—Ä–∏–π –ö–æ—Å—Ç—é–∫</h1>
                <p class="text-xs text-[#C6A664] uppercase font-bold tracking-widest mb-4">–°–æ–∑–¥–∞—é —Å–æ–±—ã—Ç–∏—è, –æ –∫–æ—Ç–æ—Ä—ã—Ö –≥–æ–≤–æ—Ä—è—Ç</p>
                <!-- –ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ -->
                <div class="marquee-container bg-white/5 py-2 border-y border-white/5 mb-4">
                    <div class="marquee-content text-xs text-gray-400 font-bold uppercase tracking-widest space-x-8">
                        <span>–°–ë–ï–†–ë–ê–ù–ö</span> <span>–ì–ê–ó–ü–†–û–ú</span> <span>–†–ñ–î</span> <span>–¢–ï–ù–ó–û–†</span> <span>–†–û–°–¢–ï–õ–ï–ö–û–ú</span> <span>–õ–£–ö–û–ô–õ</span>
                        <span>–°–ë–ï–†–ë–ê–ù–ö</span> <span>–ì–ê–ó–ü–†–û–ú</span> <span>–†–ñ–î</span> <span>–¢–ï–ù–ó–û–†</span> <span>–†–û–°–¢–ï–õ–ï–ö–û–ú</span> <span>–õ–£–ö–û–ô–õ</span>
                    </div>
                </div>
            </div>

            <!-- Stories -->
            <div>
                <h4 class="text-white text-sm font-bold mb-3 pl-1">–ì–∞–ª–µ—Ä–µ—è –∏ –û—Ç–∑—ã–≤—ã</h4>
                <div class="flex gap-4 overflow-x-auto pb-2 no-scrollbar px-1 justify-center">
                    <div class="flex flex-col items-center gap-1" onclick="openStory('reviews')">
                        <div class="story-ring w-[72px] h-[72px]"><img src="https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?auto=format&fit=crop&q=80"></div>
                        <span class="text-[10px] text-gray-300">–û—Ç–∑—ã–≤—ã</span>
                    </div>
                    <div class="flex flex-col items-center gap-1" onclick="openLightbox('gallery')">
                        <div class="story-ring w-[72px] h-[72px]"><img src="https://images.unsplash.com/photo-1511795409834-ef04bbd61622?auto=format&fit=crop&q=80"></div>
                        <span class="text-[10px] text-gray-300">–ì–∞–ª–µ—Ä–µ—è</span>
                    </div>
                    <div class="flex flex-col items-center gap-1" onclick="openStory('moments')">
                        <div class="story-ring w-[72px] h-[72px]"><img src="https://images.unsplash.com/photo-1505373877841-8d25f7d46678?auto=format&fit=crop&q=80"></div>
                        <span class="text-[10px] text-gray-300">–≠–º–æ—Ü–∏–∏</span>
                    </div>
                </div>
            </div>

            <button onclick="openPromo('private')" class="w-full py-4 bg-gradient-to-r from-[#C6A664] to-[#8A6E36] text-black font-bold rounded-xl shadow-lg flex items-center justify-center gap-2 active:scale-95 transition-transform">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                –°–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–º–æ-–≤–∏–¥–µ–æ
            </button>

            <!-- –°–ª–∞–π–¥–µ—Ä —Ñ–æ—Ä–º–∞—Ç–æ–≤ -->
            <div>
                <h2 class="text-xl font-serif text-white mb-4">–§–æ—Ä–º–∞—Ç—ã</h2>
                <div class="flex gap-4 overflow-x-auto pb-4 no-scrollbar snap-x">
                    <div class="min-w-[85%] bg-[#15171e] border border-white/10 rounded-2xl p-5 snap-center">
                        <h3 class="text-lg text-[#F3E5AB] font-serif mb-1">–ß–∞—Å—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</h3>
                        <div class="text-sm text-gray-400 mb-3">–æ—Ç 18 500 ‚ÇΩ</div>
                        <ul class="text-sm text-gray-300 list-disc list-inside mb-4 space-y-1">
                            <li>20‚Äì40 –º–∏–Ω—É—Ç</li>
                            <li>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥ —Å–æ–±—ã—Ç–∏–µ</li>
                            <li>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤ —Å–æ –∑—Ä–∏—Ç–µ–ª—è–º–∏</li>
                        </ul>
                    </div>
                    <div class="min-w-[85%] bg-[#15171e] border border-white/10 rounded-2xl p-5 snap-center">
                        <h3 class="text-lg text-[#F3E5AB] font-serif mb-1">–ú–∏–∫—Ä–æ–º–∞–≥–∏—è</h3>
                        <div class="text-sm text-gray-400 mb-3">–æ—Ç 13 000 ‚ÇΩ</div>
                        <ul class="text-sm text-gray-300 list-disc list-inside mb-4 space-y-1">
                            <li>30‚Äì180 –º–∏–Ω—É—Ç, welcome</li>
                            <li>–§–æ–∫—É—Å—ã –≤ —Ä—É–∫–∞—Ö –≥–æ—Å—Ç–µ–π</li>
                            <li>–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –±–∞–Ω–∫–µ—Ç–æ–≤</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä (–ü–û–õ–ù–´–ô) -->
            <div id="calc" class="bg-[#15171e] border border-white/10 rounded-2xl p-5 shadow-2xl scroll-mt-20">
                <h2 class="text-xl font-serif text-white mb-4 text-center">–£–∑–Ω–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å</h2>
                <form id="calcForm" class="space-y-3" onsubmit="return false;">
                    <select id="calc-area" class="form-select text-gray-300"><option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å</option></select>
                    <select id="calc-city" class="form-select text-gray-300" disabled><option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option></select>
                    <input type="date" id="calc-date" class="form-input text-gray-300">
                    <select id="calc-guests" class="form-select text-gray-300">
                        <option value="" disabled selected>–ö–æ–ª-–≤–æ –≥–æ—Å—Ç–µ–π</option>
                        <option value="0">–¥–æ 50 –≥–æ—Å—Ç–µ–π (0‚ÇΩ)</option>
                        <option value="5000">51‚Äì100 –≥–æ—Å—Ç–µ–π (+5000‚ÇΩ)</option>
                        <option value="10000">101‚Äì200 –≥–æ—Å—Ç–µ–π (+10000‚ÇΩ)</option>
                        <option value="custom">—Å–≤—ã—à–µ 200 –≥–æ—Å—Ç–µ–π</option>
                    </select>
                    <div id="guest-slider-block" class="hidden flex-col gap-2 p-2 bg-black/20 rounded-lg">
                        <label class="text-sm text-gray-400 text-center">–¢–æ—á–Ω–æ–µ –∫–æ–ª-–≤–æ: <span id="guest-count" class="text-[#C6A664] font-bold">250</span></label>
                        <input type="range" id="guest-range" min="201" max="500" value="250" class="w-full accent-[#C6A664]">
                    </div>
                    <select id="calc-cat" class="form-select text-gray-300"><option value="" disabled selected>–¢–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</option></select>
                    <select id="calc-svc" class="form-select text-gray-300" disabled><option value="" disabled selected>–ü—Ä–æ–≥—Ä–∞–º–º–∞</option></select>
                    <div id="calc-desc" class="text-xs text-gray-500 text-center min-h-[20px] px-2 leading-tight"></div>
                    <button onclick="calculatePrice()" class="w-full py-3 bg-white/10 border border-white/20 rounded-xl text-white font-bold hover:bg-[#C6A664] hover:text-black transition-colors mt-2">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                </form>
                <div id="calc-result" class="hidden text-center mt-6 border-t border-white/10 pt-4 scroll-mt-40">
                    <p class="text-xs text-gray-500 uppercase tracking-widest mb-1">–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏—Ç–æ–≥</p>
                    <div id="total-price" class="text-3xl font-serif text-[#C6A664] font-bold"></div>
                    <div id="price-breakdown" class="text-xs text-gray-400 mt-2 mb-4 bg-black/30 p-2 rounded leading-relaxed text-left pl-2"></div>
                    <div class="flex flex-col gap-3">
                        <button id="game-btn" onclick="openGame()" class="w-full py-3 border border-[#C6A664] text-[#C6A664] rounded-lg text-sm font-bold animate-pulse">üé≤ –ò—Å–ø—ã—Ç–∞—Ç—å —É–¥–∞—á—É (–°–∫–∏–¥–∫–∞)</button>
                        <button onclick="bookViaTelegram()" class="w-full py-3 bg-[#C6A664] text-black rounded-lg text-sm font-bold shadow-[0_4px_14px_rgba(198,166,100,0.4)]">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å (Telegram)</button>
                    </div>
                </div>
            </div>

            <!-- –ì–ê–õ–ï–†–ï–Ø –ú–ï–ô–°–û–ù–†–ò -->
            <div>
                <h2 class="text-xl font-serif text-white mb-4">–ì–∞–ª–µ—Ä–µ—è</h2>
                <div class="columns-2 gap-2 space-y-2">
                    <img src="https://images.unsplash.com/photo-1511795409834-ef04bbd61622?auto=format&fit=crop&q=80" class="w-full rounded-lg break-inside-avoid opacity-90 hover:opacity-100 transition cursor-pointer" onclick="openLightbox(this.src)">
                    <img src="https://images.unsplash.com/photo-1543584756-8f40a802e14f?auto=format&fit=crop&q=80" class="w-full rounded-lg break-inside-avoid opacity-90 hover:opacity-100 transition cursor-pointer" onclick="openLightbox(this.src)">
                    <img src="https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?auto=format&fit=crop&q=80" class="w-full rounded-lg break-inside-avoid opacity-90 hover:opacity-100 transition cursor-pointer" onclick="openLightbox(this.src)">
                    <img src="https://images.unsplash.com/photo-1505373877841-8d25f7d46678?auto=format&fit=crop&q=80" class="w-full rounded-lg break-inside-avoid opacity-90 hover:opacity-100 transition cursor-pointer" onclick="openLightbox(this.src)">
                    <img src="https://images.unsplash.com/photo-1469334031218-e382a71b716b?auto=format&fit=crop&q=80" class="w-full rounded-lg break-inside-avoid opacity-90 hover:opacity-100 transition cursor-pointer" onclick="openLightbox(this.src)">
                    <img src="https://images.unsplash.com/photo-1596525737525-45d351631551?auto=format&fit=crop&q=80" class="w-full rounded-lg break-inside-avoid opacity-90 hover:opacity-100 transition cursor-pointer" onclick="openLightbox(this.src)">
                </div>
            </div>

            <!-- FAQ –ü–û–õ–ù–´–ô -->
            <div>
                <h2 class="text-xl font-serif text-white mb-4">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h2>
                <div class="faq-scroll rounded-xl border border-white/5 bg-[#15171e]/50">
                    <div id="faq-list" class="space-y-1 p-2"></div>
                </div>
            </div>

            <div class="h-20"></div>
        </div>
    </div>

    <!-- ================== –í–∫–ª–∞–¥–∫–∞ 2: –ê–§–ò–®–ê (3 –®–û–£) ================== -->
    <div id="page-concert" class="page-container inner-page">
        <div class="sticky-header flex items-center p-4">
            <button onclick="goBack()" class="p-2 text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>
            <h3 class="text-lg font-serif font-bold text-white ml-2">–ê—Ñ–∏—à–∞</h3>
        </div>
        <div class="p-5 max-w-md mx-auto space-y-8">
            
            <!-- 1. –ú–∞—Ç–≤–µ–π -->
            <div class="bg-[#15171e] rounded-2xl p-4 border border-white/10 shadow-lg">
                <div class="flex gap-4 mb-4">
                    <div class="w-[35%] aspect-[2/3] bg-blue-900/20 rounded-lg relative border border-white/10"><span class="absolute top-1 left-1 bg-white text-black text-[9px] font-bold px-1 rounded">6+</span><span class="absolute center text-4xl">üê∞</span></div>
                    <div class="flex-grow bg-black rounded-lg border border-white/10 relative cursor-pointer" onclick="openPromo('matvey')"><p class="absolute bottom-1 right-2 text-[9px] text-gray-400">–¢—Ä–µ–π–ª–µ—Ä</p></div>
                </div>
                <h3 class="text-xl font-serif text-white">–°–ø–∞—Å—Ç–∏ –ú–∞—Ç–≤–µ—è</h3>
                <p class="text-sm text-gray-300 mb-4">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–≤–µ—Å—Ç.</p>
                <button onclick="openLink('https://quicktickets.ru/yaroslavl-illyuzionist-dmitrij-kostyuk')" class="w-full py-3 bg-[#222] border border-[#444] text-white text-center rounded-xl font-bold hover:bg-[#333] transition">–ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç—ã</button>
            </div>

            <!-- 2. –°–µ–∫—Ä–µ—Ç -->
            <div class="bg-[#15171e] rounded-2xl p-4 border border-[#d8aaff]/30 shadow-lg relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-[#d8aaff] text-black text-[9px] font-bold px-3 py-1 rounded-bl-lg z-10">–•–ò–¢</div>
                <div class="flex gap-4 mb-4">
                    <div class="w-[35%] aspect-[2/3] bg-purple-900/20 rounded-lg relative border border-white/10"><span class="absolute top-1 left-1 bg-[#d8aaff] text-black text-[9px] font-bold px-1 rounded">12+</span><span class="absolute center text-4xl">üé≠</span></div>
                    <div class="flex-grow bg-black rounded-lg border border-white/10 relative cursor-pointer" onclick="openPromo('secret')"><p class="absolute bottom-1 right-2 text-[9px] text-gray-400">–¢—Ä–µ–π–ª–µ—Ä</p></div>
                </div>
                <h3 class="text-xl font-serif text-white">–®–æ—É ¬´–°–µ–∫—Ä–µ—Ç¬ª</h3>
                <p class="text-sm text-gray-300 mb-4">–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–π —Å–ø–µ–∫—Ç–∞–∫–ª—å.</p>
                <button onclick="openLink('https://quicktickets.ru/yaroslavl-illyuzionist-dmitrij-kostyuk/s2')" class="w-full py-3 bg-[#d8aaff] text-black text-center rounded-xl font-bold hover:brightness-110 transition shadow-lg shadow-purple-900/20">–í—ã–±—Ä–∞—Ç—å –ª—É—á—à–∏–µ –º–µ—Å—Ç–∞</button>
            </div>

            <!-- 3. –•—É–ª–∏–≥–∞–Ω -->
            <div class="bg-[#15171e] rounded-2xl p-4 border border-red-900/40 shadow-lg">
                <div class="flex gap-4 mb-4">
                    <div class="w-[35%] aspect-[2/3] bg-red-900/20 rounded-lg relative border border-white/10"><span class="absolute top-1 left-1 bg-red-600 text-white text-[9px] font-bold px-1.5 rounded">18+</span><span class="absolute center text-4xl">üî•</span></div>
                    <div class="flex-grow bg-black rounded-lg border border-white/10 relative cursor-pointer" onclick="openPromo('huli')"><p class="absolute bottom-1 right-2 text-[9px] text-gray-400">–ü—Ä–æ–º–æ</p></div>
                </div>
                <h3 class="text-xl font-serif text-white">–•—É–ª–∏gan</h3>
                <p class="text-sm text-gray-300 mb-4">–ú–∞–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–Ω–¥–∞–ø.</p>
                <button onclick="openLink('https://quicktickets.ru/yaroslavl-illyuzionist-dmitrij-kostyuk')" class="block w-full py-3 bg-[#222] border border-[#444] text-white text-center rounded-xl font-bold hover:bg-[#333] transition">–°–º–æ—Ç—Ä–µ—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
            </div>
            <div class="h-20"></div>
        </div>
    </div>

    <!-- ================== –í–∫–ª–∞–¥–∫–∞ 3: –®–ö–û–õ–ê (–ü–û–õ–ù–ê–Ø) ================== -->
    <div id="page-school" class="page-container inner-page">
        <div class="sticky-header flex items-center p-4">
            <button onclick="goBack()" class="p-2 text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>
            <h3 class="text-lg font-serif font-bold text-white ml-2">–®–∫–æ–ª–∞ –í–æ–ª—à–µ–±—Å—Ç–≤–∞</h3>
        </div>

        <div class="p-5 max-w-md mx-auto space-y-8">
            <!-- Hero -->
            <div class="text-center">
                <h1 class="text-3xl font-cormorant text-[#C6A664] mb-2 leading-tight">ABRACADABRA</h1>
                <p class="text-sm text-gray-300 mb-4 leading-relaxed">–ú—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —É—á–∏–º —Ç—Ä—é–∫–∞–º. –ú—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –∑–∞—Å—Ç–µ–Ω—á–∏–≤–æ—Å—Ç—å –≤ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å.</p>
                <div class="flex justify-center gap-2 mb-4 text-[10px] text-gray-400">
                    <span class="bg-white/10 px-2 py-1 rounded border border-white/10">üë• –ì—Ä—É–ø–ø—ã –¥–æ 10 –¥–µ—Ç–µ–π</span>
                    <span class="bg-white/10 px-2 py-1 rounded border border-white/10">üéôÔ∏è –°—Ü–µ–Ω–∞ –∏ —Ä–µ—á—å</span>
                </div>
                <div class="bg-[#15171e] border border-[#C6A664]/30 rounded-xl p-3 flex justify-between items-center max-w-[300px] mx-auto">
                    <span class="text-xs text-[#C6A664] font-bold animate-pulse">–û—Å—Ç–∞–ª–æ—Å—å 7 –º–µ—Å—Ç</span>
                    <div class="flex gap-2 font-mono text-sm font-bold text-white" id="school-timer"><div class="bg-black px-2 py-1 rounded">03 –¥–Ω</div><div class="bg-black px-2 py-1 rounded">12:00:00</div></div>
                </div>
            </div>

            <!-- –û–± –∞–≤—Ç–æ—Ä–µ -->
            <div class="flex items-center gap-4 bg-[#15171e] p-4 rounded-xl border border-white/10">
                <div class="w-16 h-16 rounded-full border border-[#C6A664] overflow-hidden flex-shrink-0">
                    <img src="images/portrait.jpg" class="w-full h-full object-cover">
                </div>
                <div>
                    <h3 class="text-sm font-bold text-white">–î–º–∏—Ç—Ä–∏–π –ö–æ—Å—Ç—é–∫</h3>
                    <p class="text-xs text-gray-400 mt-1">–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å —à–∫–æ–ª—ã, –∏–ª–ª—é–∑–∏–æ–Ω–∏—Å—Ç, –∞–≤—Ç–æ—Ä —à–æ—É ¬´–°–µ–∫—Ä–µ—Ç¬ª. –£—á–∞—Å—Ç–Ω–∏–∫ –¢–í-–ø—Ä–æ–µ–∫—Ç–æ–≤.</p>
                </div>
            </div>

            <!-- –ü–æ—á–µ–º—É –º—ã -->
            <div>
                <h2 class="text-xl font-cormorant text-white mb-4 text-center">–ü–æ—á–µ–º—É –Ω–µ —Ñ—É—Ç–±–æ–ª?</h2>
                <div class="grid grid-cols-2 gap-3">
                    <div class="bg-[#15171e] p-4 rounded-xl border border-white/10"><h3 class="text-[#C6A664] font-bold text-sm mb-1">üß† –•–∞—Ä–∏–∑–º–∞</h3><p class="text-xs text-gray-400 leading-tight">–ù–∞–≤—ã–∫ –¥–µ—Ä–∂–∞—Ç—å –ø–∞—É–∑—É –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ–º.</p></div>
                    <div class="bg-[#15171e] p-4 rounded-xl border border-white/10"><h3 class="text-[#C6A664] font-bold text-sm mb-1">üé§ –°—Ü–µ–Ω–∞</h3><p class="text-xs text-gray-400 leading-tight">–†–µ–±–µ–Ω–æ–∫ –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç –±–æ—è—Ç—å—Å—è –ø—É–±–ª–∏–∫–∏.</p></div>
                    <div class="bg-[#15171e] p-4 rounded-xl border border-white/10"><h3 class="text-[#C6A664] font-bold text-sm mb-1">üéØ –ò–≥—Ä–∞</h3><p class="text-xs text-gray-400 leading-tight">–û—á–∫–∏, –∞—á–∏–≤–∫–∏ –∏ AR-–¥–Ω–µ–≤–Ω–∏–∫ –±–µ–∑ —Å–∫—É–∫–∏.</p></div>
                    <div class="bg-[#15171e] p-4 rounded-xl border border-white/10"><h3 class="text-[#C6A664] font-bold text-sm mb-1">üé© –®–æ—É</h3><p class="text-xs text-gray-400 leading-tight">–ú–∏–Ω–∏-–≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü.</p></div>
                </div>
            </div>

            <!-- –ü—Ä–æ–≥—Ä–∞–º–º–∞ -->
            <div class="bg-[#15171e] border border-white/10 rounded-2xl p-5">
                <h2 class="text-xl font-cormorant text-white mb-4 text-center">–ü—Ä–æ–≥—Ä–∞–º–º–∞</h2>
                <ul class="space-y-4 text-sm text-gray-300">
                    <li class="flex gap-3"><span class="text-[#C6A664] text-lg">üóìÔ∏è</span> <div><b>1 –∑–∞–Ω—è—Ç–∏–µ –≤ –Ω–µ–¥–µ–ª—é</b><br><span class="text-xs text-gray-500">2 —á–∞—Å–∞</span></div></li>
                    <li class="flex gap-3"><span class="text-[#C6A664] text-lg">üéÅ</span> <div><b>–ü—Ä–∏–∑-—Ä–µ–∫–≤–∏–∑–∏—Ç</b><br><span class="text-xs text-gray-500">–í –∫–æ–Ω—Ü–µ –º–µ—Å—è—Ü–∞</span></div></li>
                </ul>
            </div>

            <!-- –¢–∞—Ä–∏—Ñ—ã -->
            <div class="space-y-4" id="school-prices">
                <div class="bg-gradient-to-b from-[#15171e] to-black border border-white/10 rounded-2xl p-5 relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-[#C6A664] text-black text-[10px] font-bold px-2 py-1 rounded-bl-lg">-25%</div>
                    <h3 class="text-lg font-bold text-white mb-1">–ú–µ—Å—è—Ü</h3>
                    <div class="flex items-baseline gap-2 mb-2"><span class="text-3xl font-bold text-[#C6A664]">2 990 ‚ÇΩ</span><span class="text-sm text-gray-500 line-through">3 990 ‚ÇΩ</span></div>
                    <button onclick="scrollToForm()" class="w-full py-3 border border-[#C6A664] text-[#C6A664] rounded-xl font-bold text-sm hover:bg-[#C6A664] hover:text-black transition">–í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ</button>
                </div>
                <div class="bg-gradient-to-b from-[#1c202b] to-[#0f1116] border border-[#C6A664]/50 rounded-2xl p-5 relative overflow-hidden shadow-lg shadow-[#C6A664]/10">
                    <div class="absolute top-0 right-0 bg-[#C6A664] text-black text-[10px] font-bold px-2 py-1 rounded-bl-lg">–í–´–ì–û–î–ù–û</div>
                    <h3 class="text-lg font-bold text-white mb-1">–ü–æ–ª–≥–æ–¥–∞</h3>
                    <div class="flex items-baseline gap-2 mb-2"><span class="text-3xl font-bold text-[#C6A664]">14 950 ‚ÇΩ</span><span class="text-sm text-gray-500 line-through">18 690 ‚ÇΩ</span></div>
                    <button onclick="scrollToForm()" class="w-full py-3 bg-[#C6A664] text-black rounded-xl font-bold text-sm shadow-md">–û—Ñ–æ—Ä–º–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç</button>
                </div>
            </div>

            <!-- –§–æ—Ä–º–∞ —à–∫–æ–ª—ã -->
            <div id="school-form" class="bg-[#15171e] border border-white/10 rounded-2xl p-6 scroll-mt-24 shadow-2xl">
                <h2 class="text-xl font-cormorant text-white mb-2 text-center">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –º–µ—Å—Ç–æ</h2>
                <p class="text-xs text-gray-400 text-center mb-6">–ü—Ä–æ–±–Ω—ã–π —É—Ä–æ–∫ ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω–æ.</p>
                <form class="space-y-4" onsubmit="return false;">
                    <input id="s-parent" class="form-input text-gray-300" placeholder="–ò–º—è —Ä–æ–¥–∏—Ç–µ–ª—è">
                    <input id="s-phone" class="form-input text-gray-300" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω (+7...)" type="tel">
                    <input id="s-age" class="form-input text-gray-300" placeholder="–í–æ–∑—Ä–∞—Å—Ç —Ä–µ–±–µ–Ω–∫–∞ (7-13)" type="number">
                    <button onclick="submitSchoolForm()" class="w-full py-4 bg-gradient-to-r from-blue-600 to-blue-800 text-white font-bold rounded-xl shadow-lg active:scale-95 transition-transform mt-2 flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>
                        –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram
                    </button>
                </form>
            </div>

            <!-- FAQ –®–ö–û–õ–´ -->
            <div>
                <h2 class="text-xl font-cormorant text-white mb-4 text-center">–í–æ–ø—Ä–æ—Å—ã —Ä–æ–¥–∏—Ç–µ–ª–µ–π</h2>
                <div class="space-y-2">
                    <details class="bg-white/5 rounded-xl border border-white/5 overflow-hidden group"><summary class="p-4 font-bold text-[#8ecfff] cursor-pointer text-sm bg-[#15171e]">–ï—Å–ª–∏ —Ä–µ–±–µ–Ω–æ–∫ —Å—Ç–µ—Å–Ω–∏—Ç–µ–ª—å–Ω—ã–π?</summary><div class="p-4 pt-2 text-xs text-gray-300 border-t border-white/5 bg-[#0a0a0a]">–ò–º–µ–Ω–Ω–æ –¥–ª—è —Ç–∞–∫–∏—Ö –¥–µ—Ç–µ–π –º—ã –∏ –∑–∞–ø—É—Å–∫–∞–ª–∏ —à–∫–æ–ª—É.</div></details>
                    <details class="bg-white/5 rounded-xl border border-white/5 overflow-hidden group"><summary class="p-4 font-bold text-[#8ecfff] cursor-pointer text-sm bg-[#15171e]">–ï—Å–ª–∏ –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è?</summary><div class="p-4 pt-2 text-xs text-gray-300 border-t border-white/5 bg-[#0a0a0a]">–ï—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø—Ä–æ–±–Ω—ã–π —É—Ä–æ–∫.</div></details>
                </div>
            </div>
            <div class="h-20"></div>
        </div>
    </div>

    <!-- === –ú–û–î–ê–õ–ö–ò (–û–ë–©–ò–ï) === -->
    <div id="modal-story" class="fixed inset-0 bg-black z-[120] hidden flex justify-center items-center"><button onclick="closeModal('modal-story')" class="absolute top-4 right-4 text-white text-3xl z-50">‚úï</button><iframe id="story-video" class="w-full h-full max-w-md border-0" src=""></iframe></div>
    <div id="modal-promo" class="fixed inset-0 bg-black/95 z-[100] hidden flex items-center justify-center p-4"><div class="w-full max-w-4xl aspect-video bg-black rounded-xl border border-white/20 relative"><button onclick="closeModal('modal-promo')" class="absolute top-2 right-2 text-white text-2xl z-10">‚úï</button><iframe id="promo-video-frame" class="w-full h-full border-0"></iframe></div></div>
    <div id="modal-game" class="fixed inset-0 bg-black/95 z-[100] hidden flex items-center justify-center p-4"><div class="bg-[#111] w-full max-w-sm rounded-2xl border border-[#C6A664]/30 p-6 text-center relative"><button onclick="closeModal('modal-game')" class="absolute top-2 right-2 text-gray-500">‚úï</button><h2 class="text-xl font-serif text-[#C6A664]">–£–≥–∞–¥–∞–π –∫–∞—Ä—Ç—É</h2><div class="gameWrap mt-4"><div class="card-game" onclick="playGame(this, 0)"><div class="face text-black">A‚ô†</div><div class="back"></div></div><div class="card-game" onclick="playGame(this, 1)"><div class="face text-red-600">K‚ô•</div><div class="back"></div></div><div class="card-game" onclick="playGame(this, 2)"><div class="face text-black">J‚ô£</div><div class="back"></div></div></div><p id="game-msg" class="text-gray-400 mt-4 h-6 text-sm font-bold"></p></div></div>
    <div id="lightbox" class="fixed inset-0 bg-black/95 z-[130] hidden flex items-center justify-center p-2" onclick="closeModal('lightbox')"><img id="lightbox-img" class="max-w-full max-h-full rounded shadow-2xl"></div>

    <script>
        // === –î–ê–ù–ù–´–ï (–ü–û–õ–ù–´–ï) ===
        const TravelData={"–í–æ–ª–æ–≥–æ–¥—Å–∫–∞—è":{fee:9000,cities:{"–í–æ–ª–æ–≥–¥–∞":9000,"–ß–µ—Ä–µ–ø–æ–≤–µ—Ü":15000,"–°–æ–∫–æ–ª":12000}},"–í–ª–∞–¥–∏–º–∏—Ä—Å–∫–∞—è":{fee:10000,cities:{"–í–ª–∞–¥–∏–º–∏—Ä":10000,"–ö–æ–≤—Ä–æ–≤":10000,"–ú—É—Ä–æ–º":17000,"–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤":10000,"–ì—É—Å—å-–•—Ä—É—Å—Ç–∞–ª—å–Ω—ã–π":13500}},"–ò–≤–∞–Ω–æ–≤—Å–∫–∞—è":{fee:5000,cities:{"–ò–≤–∞–Ω–æ–≤–æ":2000,"–ö–∏–Ω–µ—à–º–∞":3500,"–®—É—è":3000,"–¢–µ–π–∫–æ–≤–æ":2500,"–ö–æ—Ö–º–∞":2500,"–í–∏—á—É–≥–∞":3000,"–§—É—Ä–º–∞–Ω–æ–≤":2500,"–†–æ–¥–Ω–∏–∫–∏":3000,"–ü—Ä–∏–≤–æ–ª–∂—Å–∫":2000,"–Æ–∂–∞":4000}},"–ö–æ—Å—Ç—Ä–æ–º—Å–∫–∞—è":{fee:3000,cities:{"–ö–æ—Å—Ç—Ä–æ–º–∞":2000,"–®–∞—Ä—å—è":6000,"–ù–µ—Ä–µ—Ö—Ç–∞":2000,"–ë—É–π":3000,"–í–æ–ª–≥–æ—Ä–µ—á–µ–Ω—Å–∫":2000,"–ú–∞–Ω—Ç—É—Ä–æ–≤–æ":5500,"–ì–∞–ª–∏—á":3500}},"–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∞—è":{fee:1000,cities:{"–Ø—Ä–æ—Å–ª–∞–≤–ª—å":0,"–†—ã–±–∏–Ω—Å–∫":2000,"–¢—É—Ç–∞–µ–≤":2000,"–ü–µ—Ä–µ—Å–ª–∞–≤–ª—å-–ó–∞–ª–µ—Å—Å–∫–∏–π":2000,"–£–≥–ª–∏—á":2000,"–†–æ—Å—Ç–æ–≤":2000,"–ì–∞–≤—Ä–∏–ª–æ–≤-–Ø–º":2000,"–î–∞–Ω–∏–ª–æ–≤":2000,"–ü–æ—à–µ—Ö–æ–Ω—å–µ":4000,"–ú—ã—à–∫–∏–Ω":2000,"–õ—é–±–∏–º":2000}}};
        const ServiceData={
            kids:{name:"–î–µ—Ç—Å–∫–∏–µ —à–æ—É",items:{"–î–µ—Ç—Å–∫–æ–µ —à–æ—É (30 –º–∏–Ω)":{p:11250,d:"–í–µ—Å–µ–ª–∞—è –º–∞–≥–∏—è"},"–î–µ—Ç—Å–∫–æ–µ —à–æ—É (40 –º–∏–Ω)":{p:13750,d:"–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è"},"–ò–Ω–¥–∏–≤. –¥–µ—Ç—Å–∫–æ–µ —à–æ—É":{p:21250,d:"30 –º–∏–Ω + —Ñ–æ–∫—É—Å –∏–º–µ–Ω–∏–Ω–Ω–∏–∫—É (11-–π —Ä–µ–±–µ–Ω–æ–∫ +1000‚ÇΩ)"}}},
            std:{name:"–í–∑—Ä–æ—Å–ª—ã–µ —à–æ—É",items:{"–®–æ—É (20 –º–∏–Ω)":{p:17500,d:"–°–µ—Ç –∏–∑ 3-4 —Ç—Ä—é–∫–æ–≤"},"–®–æ—É (30 –º–∏–Ω)":{p:23750,d:"–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π"}}},
            close:{name:"–ú–∏–∫—Ä–æ–º–∞–≥–∏—è",items:{"–ú–∏–∫—Ä–æ–º–∞–≥–∏—è (30 –º–∏–Ω)":{p:13000,d:"–§–æ–∫—É—Å—ã –≤ —Ä—É–∫–∞—Ö"},"–ú–∏–∫—Ä–æ–º–∞–≥–∏—è (1 —á)":{p:20000,d:"–û–±—Ö–æ–¥ –≥–æ—Å—Ç–µ–π"}}},
            spec:{name:"–°–ø–µ—Ü-–ø—Ä–æ–µ–∫—Ç—ã",items:{"–°–≤–∞–¥–µ–±–Ω–æ–µ —à–æ—É":{p:26250,d:"–†–æ–º–∞–Ω—Ç–∏—á–Ω—ã–π –±–ª–æ–∫"},"–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤":{p:26250,d:"–Æ–º–æ—Ä"}}}
        };
        const FAQData=[
            {q:"–ó–∞ —Å–∫–æ–ª—å–∫–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å?",a:"–û–±—ã—á–Ω–æ –∑–∞ 2-3 –Ω–µ–¥–µ–ª–∏."},
            {q:"–†–∞–∑–º–µ—Ä –∑–∞–¥–∞—Ç–∫–∞?",a:"50% –æ—Ç —Å—É–º–º—ã."},
            {q:"–í—Å—ë –≤–∫–ª—é—á–µ–Ω–æ?",a:"–î–∞, —Ü–µ–Ω–∞ –ø–æ–¥ –∫–ª—é—á."},
            {q:"–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å?",a:"–û—Ç 20 –º–∏–Ω –¥–æ 3 —á–∞—Å–æ–≤."},
            {q:"–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è?",a:"–î–∞, —Å–¥–µ–ª–∞–µ–º —Ç—Ä—é–∫ –ø–æ–¥ –≤–∞—Å."},
            {q:"–ù—É–∂–Ω–∞ —Å—Ü–µ–Ω–∞?",a:"–ß–∞—â–µ –Ω–µ—Ç, –æ–±—Å—É–∂–¥–∞–µ–º–æ."},
            {q:"–ó–≤—É–∫?",a:"–° –≤–µ–¥—É—â–∏–º - –≤—Å–µ –≥–æ—Ç–æ–≤–æ. –ë–µ–∑ - –Ω—É–∂–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞."},
            {q:"–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞?",a:"30-60 –º–∏–Ω—É—Ç."},
            {q:"–í—ã–µ–∑–¥?",a:"–î–∞, —Ä–∞–±–æ—Ç–∞—é –ø–æ –†–§."},
            {q:"–û–ø–ª–∞—Ç–∞?",a:"–ë–µ–∑–Ω–∞–ª, –°–ë–ü, –Ω–∞–ª, —á–µ–∫."},
            {q:"–í–æ–∑—Ä–∞—Å—Ç –¥–µ—Ç–µ–π?",a:"8+. –î–ª—è –º–ª–∞–¥—à–∏—Ö - –∞–¥–∞–ø—Ç–∞—Ü–∏—è."},
            {q:"–§–æ—Ç–æ/–≤–∏–¥–µ–æ?",a:"–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è."},
            {q:"–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ?",a:"–†–∞–±–æ—Ç–∞—é –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É (–ò–ü)."},
            {q:"–û—Ç–∫—Ä—ã—Ç—ã–π –≤–æ–∑–¥—É—Ö?",a:"–õ–µ—Ç–æ–º –≤ –±–µ–∑–≤–µ—Ç—Ä–∏–µ."},
            {q:"–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å?",a:"–¢–æ–ª—å–∫–æ —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∫–≤–∏–∑–∏—Ç."},
            {q:"–ë—Ä–µ–Ω–¥?",a:"–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º –ª–æ–≥–æ –∫–æ–º–ø–∞–Ω–∏–∏."},
            {q:"–ü–µ—Ä–µ–Ω–æ—Å?",a:"–í–æ–∑–º–æ–∂–µ–Ω –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–ª–æ—Ç–∞."},
            {q:"–ê—É–¥–∏—Ç–æ—Ä–∏—è?",a:"–û—Ç 10 –¥–æ 500+ —á–µ–ª."},
            {q:"–ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã?",a:"–î–∞, 60 –º–∏–Ω –æ–±—É—á–µ–Ω–∏–µ."}
        ];
        
        let AppState = { discount: 0 };

        // === INIT ===
        window.addEventListener('load', () => {
            initCalc(); initFAQ(); checkGameAvailability(); initSchoolTimer();
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É (—Å–µ–≥–æ–¥–Ω—è)
            document.getElementById('calc-date').min = new Date().toISOString().split('T')[0];
            setTimeout(() => { document.body.classList.add('curtains-open'); document.getElementById('curtain-logo').style.opacity='0'; setTimeout(()=>document.getElementById('intro-overlay').style.display='none',1000); }, 600);
        });

        // === NAV ===
        function goToPage(id) { document.getElementById(id).classList.add('active'); document.getElementById('home-page').style.opacity='0'; }
        function goBack() { document.querySelectorAll('.inner-page').forEach(p=>p.classList.remove('active')); document.getElementById('home-page').style.opacity='1'; }
        function openLink(url) { const a=document.createElement('a'); a.href=url; a.target='_blank'; a.click(); }
        function openContact(msg='Hi!') { openLink(`https://t.me/demonnikko?text=${encodeURIComponent(msg)}`); }
        function showToast(msg) { const t=document.getElementById('toast'); t.querySelector('span').textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),3000); }

        // === MODALS ===
        function closeModal(id) { document.getElementById(id).classList.add('hidden'); if(id==='modal-story') document.getElementById('story-video').src=''; if(id==='modal-promo') document.getElementById('promo-video-frame').src=''; }
        function openPromo(t) { document.getElementById('modal-promo').classList.remove('hidden'); document.getElementById('promo-video-frame').src="https://rutube.ru/play/embed/a692a6ad3b922abc4cfad5be5898431b"; }
        function openGame() { document.getElementById('modal-game').classList.remove('hidden'); }
        function openLightbox(src) { document.getElementById('lightbox-img').src=src; document.getElementById('lightbox').classList.remove('hidden'); }
        function openStory(t) { document.getElementById('modal-story').classList.remove('hidden'); document.getElementById('story-video').src="https://www.youtube.com/embed/tgbNymZ7vqY?autoplay=1&controls=0&loop=1"; }

        // === CALC LOGIC (ADVANCED) ===
        function hol(d) { 
            if(!d)return 1; const dt=new Date(d), m=dt.getMonth()+1, day=dt.getDate(); 
            // –ù–æ–≤—ã–π –≥–æ–¥ (x2)
            if((m===12&&day===31)||(m===1&&(day===1||day===2))) return 2; 
            // –ü—Ä–µ–¥–Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ (x1.5)
            if(m===12&&day>=8&&day<=30) return 1.5; 
            return 1; 
        }
        function roadHol(d) {
            if(!d)return 1; const dt=new Date(d), m=dt.getMonth()+1, day=dt.getDate();
            // –ù–æ–≤—ã–π –≥–æ–¥ (x2)
            if((m===12&&day===31)||(m===1&&(day===1||day===2))) return 2;
            // –ü—Ä–µ–¥–Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ (x1.5)
            if(m===12&&day>=8&&day<=30) return 1.5;
            // 23 –§–µ–≤ –∏ 8 –ú–∞—Ä—Ç–∞ (x1.5)
            if(m===2&&(day===22||day===23)) return 1.5;
            if(m===3&&(day===7||day===8)) return 1.5;
            return 1;
        }
        
        function initCalc() {
            const area=document.getElementById('calc-area'), cat=document.getElementById('calc-cat');
            Object.keys(TravelData).forEach(k=>area.add(new Option(k,k)));
            Object.keys(ServiceData).forEach(k=>cat.add(new Option(ServiceData[k].name,k)));
            area.onchange=()=>{ 
                const c=document.getElementById('calc-city'); c.disabled=false; c.innerHTML='<option disabled selected>–ì–æ—Ä–æ–¥</option>';
                Object.keys(TravelData[area.value].cities).forEach(k=>c.add(new Option(k,k))); 
            };
            cat.onchange=()=>{ 
                const s=document.getElementById('calc-svc'); s.disabled=false; s.innerHTML='<option disabled selected>–ü—Ä–æ–≥—Ä–∞–º–º–∞</option>';
                Object.keys(ServiceData[cat.value].items).forEach(k=>s.add(new Option(k,k))); 
            };
            document.getElementById('calc-svc').onchange=(e)=>document.getElementById('calc-desc').innerText=ServiceData[document.getElementById('calc-cat').value].items[e.target.value].d;
            document.getElementById('calc-guests').onchange=(e)=>document.getElementById('guest-slider-block').style.display=e.target.value==='custom'?'flex':'none';
            document.getElementById('guest-range').oninput=(e)=>document.getElementById('guest-count').innerText=e.target.value;
        }
        
        function calculatePrice() {
            const a=document.getElementById('calc-area').value, c=document.getElementById('calc-city').value,
                  ct=document.getElementById('calc-cat').value, s=document.getElementById('calc-svc').value, g=document.getElementById('calc-guests').value,
                  d=document.getElementById('calc-date').value;
            if(!a||!c||!ct||!s||!d){ showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!'); return; }
            
            // 1. –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ —É—Å–ª—É–≥–∏
            let base=ServiceData[ct].items[s].p; 
            if(a==='–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∞—è'&&c==='–Ø—Ä–æ—Å–ª–∞–≤–ª—å') base+=1000;
            
            // 2. –î–æ—Ä–æ–≥–∞
            const roadBase=TravelData[a].cities[c];
            // –ù–∞—Ü–µ–Ω–∫–∞ –Ω–∞ –¥–æ—Ä–æ–≥—É –≤ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏
            const rCoef = roadHol(d);
            const roadExtra = Math.round(roadBase * (rCoef - 1));
            
            // 3. –ì–æ—Å—Ç–∏
            let gst=0; 
            if(g==='custom') gst=(document.getElementById('guest-range').value-200)*80; 
            else gst=parseInt(g);
            if(g==='5000') gst=5000;
            if(g==='10000') gst=10000;
            
            // 4. –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Å—É–º–º–∞
            const subTotal = base + roadBase + roadExtra + gst;
            
            // 5. –ü—Ä–∞–∑–¥–Ω–∏—á–Ω–∞—è –Ω–∞—Ü–µ–Ω–∫–∞ –Ω–∞ –≤—Å—ë
            const hCoef = hol(d);
            const holUp = Math.round(subTotal * (hCoef - 1));
            
            // 6. –ò—Ç–æ–≥–æ –¥–æ —Å–∫–∏–¥–∫–∏
            let tot = subTotal + holUp;
            
            // 7. –°–∫–∏–¥–∫–∞
            if(AppState.discount>0) tot=Math.round(tot*(100-AppState.discount)/100);
            
            document.getElementById('total-price').innerText=tot.toLocaleString()+' ‚ÇΩ';
            
            let breakdown = `–£—Å–ª—É–≥–∞: ${base} | –î–æ—Ä–æ–≥–∞: ${roadBase}`;
            if(roadExtra > 0) breakdown += ` (+${roadExtra} –ø—Ä–∞–∑–¥–Ω.)`;
            breakdown += ` | –ì–æ—Å—Ç–∏: ${gst}`;
            if(holUp > 0) breakdown += ` | –ü—Ä–∞–∑–¥–Ω–∏–∫ (x${hCoef})`;
            if(AppState.discount > 0) breakdown += ` | –°–∫–∏–¥–∫–∞ -${AppState.discount}%`;
            
            document.getElementById('price-breakdown').innerText = breakdown;
            
            const r=document.getElementById('calc-result'); r.classList.remove('hidden'); r.classList.add('fade-in-up');
            setTimeout(()=>r.scrollIntoView({behavior:'smooth',block:'center'}),100);
        }
        
        function bookViaTelegram() {
            const p=document.getElementById('total-price').innerText; if(!p) return;
            const a=document.getElementById('calc-area').value, c=document.getElementById('calc-city').value, d=document.getElementById('calc-date').value, s=document.getElementById('calc-svc').value;
            openContact(`–ó–∞—è–≤–∫–∞ –Ω–∞ –¥–∞—Ç—É ${d}.\n–ì–æ—Ä–æ–¥: ${c} (${a})\n–£—Å–ª—É–≥–∞: ${s}\n–†–∞—Å—á–µ—Ç–Ω–∞—è —Ü–µ–Ω–∞: ${p}`);
        }

        // === FAQ ===
        function initFAQ() {
            document.getElementById('faq-list').innerHTML=FAQData.map(i=>`<details class="bg-white/5 rounded-xl border border-white/5 overflow-hidden"><summary class="p-4 font-bold text-[#C6A664] cursor-pointer text-sm">${i.q}</summary><div class="p-4 pt-0 text-xs text-gray-300 border-t border-white/5">${i.a}</div></details>`).join('');
        }

        // === GAME ===
        function checkGameAvailability() {
            try {
                const lp=localStorage.getItem('lastPlayed'), td=new Date().toDateString();
                if(lp===td) {
                    const w=localStorage.getItem('won')==='true';
                    const b=document.getElementById('game-btn');
                    if(w) { AppState.discount=10; b.innerText="‚úÖ –°–∫–∏–¥–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞"; } 
                    else { b.innerText="‚è≥ –ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞"; }
                    b.disabled=true; b.classList.remove('animate-pulse'); b.classList.add('opacity-50');
                }
            } catch(e){}
        }
        function playGame(el, i) {
            try {
                const lp=localStorage.getItem('lastPlayed'), td=new Date().toDateString();
                if(lp===td) return;
                const winIdx=Math.floor(Math.random()*3), isWin=(i===winIdx);
                const faces=document.querySelectorAll('.face');
                faces[0].innerText=(0===winIdx)?"A‚ô†":"K‚ô•"; faces[1].innerText=(1===winIdx)?"A‚ô†":"J‚ô£"; faces[2].innerText=(2===winIdx)?"A‚ô†":"Q‚ô¶";
                el.classList.add('flipped');
                localStorage.setItem('lastPlayed',td); localStorage.setItem('won',isWin);
                setTimeout(()=>{
                    if(isWin) { document.getElementById('game-msg').innerText='üî• –°–ö–ò–î–ö–ê 10%!'; document.getElementById('game-msg').className='text-green-400 font-bold'; AppState.discount=10; if(!document.getElementById('calc-result').classList.contains('hidden')) calculatePrice(); }
                    else { document.getElementById('game-msg').innerText='üò¢ –£–≤—ã, –º–∏–º–æ.'; document.getElementById('game-msg').className='text-red-400 font-bold'; }
                    checkGameAvailability(); setTimeout(()=>closeModal('modal-game'),2000);
                },800);
            } catch(e){}
        }

        // === SCHOOL LOGIC ===
        function initSchoolTimer() {
            const d=3*24*60*60*1000 + Date.now();
            setInterval(()=>{
                const diff=d-Date.now();
                if(diff<=0) return;
                const days=Math.floor(diff/86400000);
                const h=Math.floor((diff%86400000)/3600000);
                const m=Math.floor((diff%3600000)/60000);
                document.getElementById('school-timer').innerHTML=`<div class="bg-black px-2 py-1 rounded">0${days} –¥–Ω</div><div class="bg-black px-2 py-1 rounded">${h}:${m}</div>`;
            }, 60000);
        }
        function scrollToForm() { document.getElementById('school-form').scrollIntoView({behavior:'smooth'}); }
        function submitSchoolForm() {
            const p=document.getElementById('s-parent').value, ph=document.getElementById('s-phone').value, a=document.getElementById('s-age').value;
            if(!p||!ph||!a){ showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è'); return; }
            openContact(`–ó–∞—è–≤–∫–∞ –≤ –®–∫–æ–ª—É!\n–†–æ–¥–∏—Ç–µ–ª—å: ${p}\n–¢–µ–ª: ${ph}\n–í–æ–∑—Ä–∞—Å—Ç: ${a}`);
        }
    </script>
</body>
</html>
